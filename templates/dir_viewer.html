{% extends "base.html" %}

{% block topbar %}
<li ><a href="/docker_server/">Docker Server</a></li>
<li ><a href="/supervisor_server/">Supervisor Server</a></li>
<li class="active"><a href="/dir_viewer/">Dir Viewer</a></li>
<li ><a href="/actions_log/">Actions Log</a></li>
{% endblock %}

{% block body %}
<div class="page-header">
    <h1>
        <small>controlled by django</small>
    </h1>
</div>
<div class="row">
    <div class="col-md-4">
        <ul class="nav nav-pills nav-stacked">
            {% for server in servers %}
            <li role="presentation" style="background-color: lemonchiffon  ">
 <!--              <a href="#" onclick="show_server_status('{{server.id}}')">
                    {{server.host}}:{{server.port}} {{server.Id}}
 -->               </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-md-8" id="server_div">
    </div>
</div>


<h3>{{current_dir}}</h3>
<table class="table table-striped">
    <tr>
        <th width="40%">name</th>
        <th width="25%">size</thw>
        <th width="25%">mtime</th>
        <th colspan="4" width="10%">operation</th>
    </tr>
    {% for dir_info in dir_infos %}
    {% if dir_info.isdir == 1  %}
    <tr>
        <td>
        <span class="fa fa-folder" onclick="dir_viewer('{{dir_info.file_name}}', '{{current_dir}}')">
        {{dir_info.file_name}}
        </span>
        </td>
        <td>{{dir_info.file_size}}</td>
        <td>{{dir_info.mtime}}</td>
        <td>
            <button class="btn btn-primary btn-xs"
                    onclick="dir_viewer('{{dir_info.file_name}}', '{{current_dir}}')">
                open
            </button>
        </td>
        <td>
            <button class="btn btn-primary btn-xs"
                    onclick="#">
                download
            </button>
        </td>
    </tr>
    {% endif %}
    {% endfor %}

    {% for dir_info in dir_infos %}
    {% if dir_info.isdir == 0  %}
    <tr>
        <td>
        <span class="fa fa-file-text" onclick="text_viewer('{{dir_info.file_name}}', '{{current_dir}}')">
        {{dir_info.file_name}}
        </span>
        </td>
        <td>{{dir_info.file_size}}</td>
        <td>{{dir_info.mtime}}</td>
        <td>
            <button class="btn btn-primary btn-xs"
                    onclick="text_viewer('{{dir_info.file_name}}', '{{current_dir}}')">
                open
            </button>
        </td>
        <td>
            <button class="btn btn-primary btn-xs"
                    onclick="file_download('{{dir_info.file_name}}', '{{current_dir}}')">
                download
            </button>
        </td>


    </tr>
    {% endif %}
    {% endfor %}
</table>

{% endblock %}
</body>
</html>